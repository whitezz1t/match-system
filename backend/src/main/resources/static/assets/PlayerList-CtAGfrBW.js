import{D as e,E as t,I as n,L as r,M as i,N as a,P as o,S as s,T as c,V as l,_ as u,c as d,i as f,j as p,k as m,n as h,o as g,t as _,x as v,z as y}from"./index-BJes4zwE.js";import{t as b}from"./axios-CseGY6Es.js";var x={class:`card-header`},S=u({__name:`PlayerList`,setup(l){let u=n([]),S=n(!1),C=async()=>{S.value=!0;try{u.value=(await b.get(`/api/players`)).data.reverse()}catch{h.error(`èŽ·å–é€‰æ‰‹åˆ—è¡¨å¤±è´¥`)}finally{S.value=!1}},w=()=>{_.prompt(`è¯·è¾“å…¥æ–°é€‰æ‰‹çš„åå­—`,`æ·»åŠ é€‰æ‰‹`,{confirmButtonText:`ç¡®å®š`,cancelButtonText:`å–æ¶ˆ`,inputPattern:/\S/,inputErrorMessage:`åå­—ä¸èƒ½ä¸ºç©º`}).then(async({value:e})=>{try{await b.post(`/api/players`,null,{params:{name:e}}),h.success(`é€‰æ‰‹ ${e} æ·»åŠ æˆåŠŸ`),C()}catch{h.error(`æ·»åŠ å¤±è´¥`)}}).catch(()=>{})},T=e=>{_.prompt(`ä¿®æ”¹é€‰æ‰‹å§“å`,`ç¼–è¾‘`,{confirmButtonText:`ä¿å­˜`,cancelButtonText:`å–æ¶ˆ`,inputValue:e.name,inputPattern:/\S/,inputErrorMessage:`åå­—ä¸èƒ½ä¸ºç©º`}).then(async({value:t})=>{if(t!==e.name)try{await b.put(`/api/players/${e.playerId}`,null,{params:{name:t}}),h.success(`ä¿®æ”¹æˆåŠŸ`),C()}catch{h.error(`ä¿®æ”¹å¤±è´¥`)}}).catch(()=>{})},E=e=>{_.confirm(`ç¡®å®šè¦åˆ é™¤é€‰æ‰‹ "${e.name}" å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ¢å¤ã€‚`,`è­¦å‘Š`,{confirmButtonText:`ç¡®å®šåˆ é™¤`,cancelButtonText:`å–æ¶ˆ`,type:`warning`}).then(async()=>{try{await b.delete(`/api/players/${e.playerId}`),h.success(`åˆ é™¤æˆåŠŸ`),C()}catch(e){e.response&&e.response.status===500?h.error(`åˆ é™¤å¤±è´¥ï¼šè¯¥é€‰æ‰‹å·²æœ‰æ¯”èµ›è®°å½•ï¼Œæ— æ³•åˆ é™¤ï¼`):h.error(`åˆ é™¤å¤±è´¥`)}}).catch(()=>{})};return e(()=>{C()}),(e,n)=>{let l=p(`el-icon`),h=p(`el-button`),_=p(`el-table-column`),b=p(`el-tag`),C=p(`el-avatar`),D=p(`el-table`),O=p(`el-card`),k=i(`loading`);return m(),s(O,{shadow:`never`},{header:a(()=>[v(`div`,x,[n[1]||=v(`span`,null,`ðŸ‘¥ é€‰æ‰‹åˆ—è¡¨`,-1),t(h,{type:`primary`,onClick:w},{default:a(()=>[t(l,{style:{"margin-right":`5px`}},{default:a(()=>[t(r(d))]),_:1}),n[0]||=c(`æ·»åŠ æ–°é€‰æ‰‹ `,-1)]),_:1})])]),default:a(()=>[o((m(),s(D,{data:u.value,style:{width:`100%`},border:``,stripe:``},{default:a(()=>[t(_,{prop:`playerId`,label:`ID`,width:`80`,align:`center`}),t(_,{prop:`name`,label:`å§“å`,width:`180`,align:`center`},{default:a(e=>[t(b,{effect:`plain`,round:``,size:`large`},{default:a(()=>[c(y(e.row.name),1)]),_:2},1024)]),_:1}),t(_,{label:`å¤´åƒ`,align:`center`},{default:a(()=>[t(C,{size:30,icon:`UserFilled`})]),_:1}),t(_,{label:`æ“ä½œ`,width:`200`,align:`center`},{default:a(e=>[t(h,{link:``,type:`primary`,size:`small`,onClick:t=>T(e.row)},{default:a(()=>[t(l,null,{default:a(()=>[t(r(g))]),_:1}),n[2]||=c(` ç¼–è¾‘ `,-1)]),_:1},8,[`onClick`]),t(h,{link:``,type:`danger`,size:`small`,onClick:t=>E(e.row)},{default:a(()=>[t(l,null,{default:a(()=>[t(r(f))]),_:1}),n[3]||=c(` åˆ é™¤ `,-1)]),_:1},8,[`onClick`])]),_:1})]),_:1},8,[`data`])),[[k,S.value]])]),_:1})}}},[[`__scopeId`,`data-v-1ac324db`]]);export{S as default};